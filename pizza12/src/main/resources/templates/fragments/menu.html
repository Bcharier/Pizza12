<div th:fragment="menu">
  <span>MENU</span>
  <th:block th:each="product, iStat : ${products}">
    <th:block th:if="${@menuHelper.checkIfDisplayCategoryName(products, iStat.index)}">
        <th:block th:if="${iStat.index gt 0}" th:utext="'&lt;ul&gt;&lt;/ul&gt;'" />
      <div th:class="'categoryName ' + ${product.category.categoryName}" data-th-text="${product.category.categoryName}">categoryName</div>
    </th:block>
    <li class="productName" data-th-text="${product.productName}">productName</li>
  </th:block>
</div>